<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Automatic Login a.k.a. Remember Me</title>

<style type="text/css">
<!--
a, a:active, a:visited { color: #006666; text-decoration: none; }
a:hover { color:#00CC99; text-decoration: underline; }
body, p, h1, h2, h3, h4, h5, h6, li, td, dd, dt, fieldset { font-family: Verdana, AvantGarde, Tahoma, Arial, sans-serif; font-size: 10pt; color: black; padding: 0px; margin: 20px; }
pre { margin: 20px; }
H1, H2, H3, H4 { font-weight: bold }
h1 { font-size: 20px; }
h2 { font-size: 16px; }
ol li, ul li { margin: 5px 0; }
.corefile, .impt { color: red; }
.template { color: green; }
img { margin-left: 20px; max-width: 95%; }
-->
</style>
</head>

<body>
<h1>Remember Me (Automatic Login) &mdash;  for Zen Cart v1.5.5</h1>
<h3>Version 1.4.5</h3>
<p>Current Support Thread at Zen Cart Forums: <a href="https://www.zen-cart.com/forum/showthread.php?t=57982" target="_blank">https://www.zen-cart.com/forum/showthread.php?t=57982</a></p>

<hr />
<h2>What it does</h2>
<p>When a customer creates an account or logs in, s/he is offered the option (a &quot;Remember Me?&quot; checkbox) to be automatically logged into your website on subsequent visits.  If the customer checks this box, a cookie is set in the customer's browser; that cookie's name is <code>zcrm_xxxx</code> where &quot;xxxx&quot; is an MD5 hash of your store's name (as set in <em>Configuration-&gt;My Store</em>).  That cookie remains set (and provides a continued-login to your store) until:<p>
<ol>
  <li>the customer clicks the <em>Logoff</em> link in your store.</li>
  <li>the cookie expires or is otherwise removed.</li>
</ol>
<p><strong>Security Note:</strong> The customer's password, as stored in the cookie, is a hashed version of customer's Zen Cart hashed password value, so the customer's actual password or password hash is never exposed.</p>

<p>Once you have installed the plugin, the following additional configuration settings are available in <em>Configuration-&gt;Customer Details</em>:</p>
<ul>
  <li><b>Enable Automatic Login?</b> Controls the overall enabling of the plugin's feature. Set to <em>true</em> or <em>false</em> (default).  Note that the default value has changed in v1.4.3 from <em>true</em> to <em>false</em>, since you should set your &quot;Secret Key&quot; prior to enabling!</li>
  <li><b>Automatic Login (Cookie Lifetime)</b> Identifies the number of days that the &quot;Remember Me&quot; cookie should live (default: 14).</li>
  <li><b>Automatic Login (Secret Key)</b> Contains the &quot;shared secret&quot; used to hash the customer's already hashed password.</li>
</ul>

<hr />
<h2>Installation</h2>
<p>This plugin currently has no <span class="corefile">core-file</span> overwrites, but it does have two (2) <span class="template">template-overrides</span>; you should <strong>always</strong> backup your cart's database and files prior to making any changes.  <strong>Note:</strong> Zen Cart v1.5.5e's <code>template_default</code> template was used as the Zen Cart basis for all template-override changes.</p>
<fieldset>
  <legend>Upgrading to v1.4.3 or later</legend>
  <p>This version drops support for Zen Cart versions prior to 1.5.5 and updates the plugin's <span class="template">template-override</span> files to use Zen Cart 1.5.5e's template_default as the change-basis.  There is <em>no change</em> to the additions made by this plugin, so if you have made changes to either of these files it is safe to leave those files as-is for the <em>Remember Me</em> update.</p>
</fieldset>
<ol>
  <li>Unzip the plugin's package file.  Rename the YOUR_ADMIN folder to match your secret admin folder's name and the YOUR_TEMPLATE directory to match your current template's name.</li>
  <li>Use a program like <em>WinMerge</em> or <em>Beyond Compare</em> to compare the plugin's <span class="template"> two (2) template-overrides</span> to your store's current files and merge any changes required.</li>
  <li>Log into your Zen Cart admin.</li>
  <li>Copy the plugin's files to your store's file system.<ol>
    <li>/includes/auto_loaders/config.remember_me.php</li>
    <li>/includes/classes/observers/class.remember_me_observer.php</li>
    <li>/includes/init_includes/init_remembered_cart.php</li>
    <li>/includes/languages/english/extra_definitions/remember_me_definitions.php</li>
    <li><span class="template">/includes/templates/YOUR_TEMPLATE/templates/tpl_login_default.php</span></li>
    <li><span class="template">/includes/templates/YOUR_TEMPLATE/templates/tpl_modules_create_account.php</span></li>
    <li>/YOUR_ADMIN/includes/functions/extra_functions/init_remember_me.php</li>
  </ol></li>
  <li>Click the &quot;Admin Home&quot; link, then click <em>Configuration-&gt;Customer Details</em> to set the <em>Automatic Login</em> options to your liking.</li>
</ol>
<p><strong>Note:</strong> This plugin also includes a SQL uninstall file, present in the root directory.  That file should not be copied to your store during the installation process.</p>

<h3>Un-Install</h3>
<p>To remove this plugin from your Zen Cart store:</p><ol>
  <li>Remove the files you copied during the install, editing out the plugin's changes to those two <span class="template">template-override</span> files.</li>
  <li>Open the plugin's file /remember_me_uninstall.sql, copy &amp; paste that file's contents into your admin's <em>Tools-&gt;Install SQL Patches</em> and run that script to remove the database portion of the plugin.</li>
</ol>

<hr />
<h2>Version History</h2>
<h3>Authors' History</h3>
<ol>
  <li>Original Code by chris at linuxuser.at</li>
  <li>Optional logoff and admin controls by kuroi</li>
  <li>Packaged by ryk 23 Feb 2007</li>
</ol>
<h3>Versions and Changes</h3>
<ul>
  <li>v1.4.5, 2017-12-xx (lat9):<ul>
    <li>BUGFIX: Additional management and logging when an existing cookie can't be decoded or was deleted.</li>
    <li>BUGFIX: Disable customer &quot;remembering&quot; when the customer is checking-out as a guest.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.remember_me_observer.php</li>
    </ol></li>
  </ul></li>
  <li>v1.4.4, 2017-10-22 (lat9):<ul>
    <li>BUGFIX: Comment-out debug code.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.remember_me_observer.php</li>
    </ol></li>
  </ul></li>
  <li>v1.4.3, 2017-10-20 (lat9):<ul>
    <li>CHANGE: Drops support for Zen Cart versions prior to 1.5.5.</li>
    <li>CHANGE: Use the Zen Cart 1.5.5e version as the change-basis for <span class="template">template-overrides</span>.</li>
    <li>CHANGE: The installation default for <em>Enable Automatic Login?</em> has changed from <em>true</em> to <em>false</em>.</li>
    <li>BUGFIX: &quot;Remembered&quot; cart's contents not restored.</li>
    <li>BUGFIX: Store the cookie at a <em>known</em> domain/path; interoperability issues with URL-modifying plugins.</li>
    <li>The following files were changed or added:<ol>
      <li>/includes/auto_loaders/config.remember_me.php</li>
      <li>/includes/classes/observers/class.remember_me_observer.php</li>
      <li>/includes/init_includes/init_remembered_cart.php</li>
      <li><span class="template">/includes/templates/YOUR_TEMPLATE/templates/tpl_login_default.php</span></li>
      <li><span class="template">/includes/templates/YOUR_TEMPLATE/templates/tpl_modules_create_account.php</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_remember_me.php</li>
    </ol></li>
  </ul></li>
  <li>v1.4.2, 2015-12-30 (lat9):<ul>
    <li>CHANGE: Update the <em>template-override</em> files to use downwardly-compatible changes introduced in Zen Cart v1.5.5.  Changed:<ol>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_login_default.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_modules_create_account.php</li>
    </ol></li>
    <li>CHANGE: Added the file /remember_me_uninstall.sql, to remove the database changes on an uninstall of the plugin.</li>
  </ul></li>
  <li>v1.4.1, 2014-07-09 (lat9):<ul>
    <li>Updated template changes to incorporate downwardly-compatible changes introduced in Zen Cart v1.5.3.  Changed:<ol>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_login_default.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_modules_create_account.php</li>
    </ol></li>
  </ul></li>
  <li>v1.4.0, 2014-06-20 (lat9):<ul>
    <li>Incorporate SQL install script into a PHP auto-install script.</li>
    <li>Move run-time language changes into an extra_definitions file so that they're common between the login and create_account page.</li>
    <li>Move processing to a run-time observer, no more core-file overwrites!</li>
    <li>Modified information stored in the cookie and the means of validating the cookie's value.</li>
    <li>Removed customer logoff as an option (for simplification); if the customer chooses to logoff from the store, the &quot;Remember Me&quot; cookie expires.</li>
  </ul></li>
  <li>v1.3, 2009-11-06 (Linxor):<ul>
    <li>Updated script to be compatible with ZC v1.3.8a. This was mainly for changes to core files and tpl_login_default.php</li>
    <li>Removed need to modify core file: includes/modules/pages/index/header_php.php</li>
    <li>Added configuration item to set how long you want to remember the user.</li>
    <li>The cookie is given a new lease when the user revisits the site.</li>
    <li>Changed string in language file from "NB." to "Please Note:" since "NB." is less common vernacular.</li>
  </ul></li>
</ul>

</body>
</html>